우분투 최신 버전(25.04) 사용 중 자잘한 버그와 충돌이 너무 많아 LTS 버전으로 회귀하는 김에 셋업 일지를 작성.


[타 저장소 자동 마운트](https://m.blog.naver.com/watney0813/221017927194)
# 1. 우분투 첫 사용시

1. 본인이 프로그램을 이것저것 뜯어보는게 좋아서 미치겠다 하는게 아니면 우분투 LTS 버전 사용을 권장.
2. 어플리케이션 설치 시 SNAP 패키지는 경험상 오류가 많았음. 선택이 가능하면 데비안 패키지 사용 추천.



# 2. Vivado/Vitis 설치

[공홈 설치 가이드 참조](https://docs.amd.com/r/en-US/ug1400-vitis-embedded/Installing-the-Vitis-Software-Platform)
[공홈 설치 가이드 참조(USB 드라이버)](https://docs.amd.com/r/en-US/ug973-vivado-release-notes-install-license/Installing-Cable-Drivers)

## 1. 선행 라이브러리 설치
![[Images/Pasted image 20250904222527.png]]
설치 툴을 이용해 모든 설치가 끝났으면, 비바도 혹은 바이티스 설치 경로에서 scripts 폴더 내 installLibs.sh 셸 파일을 실행해 프로그램에 필요한 라이브러리를 설치한다.

```bash title="설치 명령어"
cd /비바도or바이티스 폴더/scripts
sudo ./installLibs.sh
```


## 2. 케이블 드라이버 설치
![[Images/Pasted image 20250904223302.png]]
위 사진에 나온 것 처럼 비바도/바이티스 경로 내 /data/xicom/cable_drivers/lin64/install_script/install_drivers 에서 드라이버 설치를 진행한다.

```bash title="설치 명령어"
sudo ./install_drivers
sudo ./install_digilent.sh
```







# 3. cubeIDE(STM) 설치

[공홈 설치 링크](https://www.st.com/en/development-tools/stm32cubeide.html)
[공홈 설치 가이드 링크](file:///home/wonhyeok/%EB%8B%A4%EC%9A%B4%EB%A1%9C%EB%93%9C/um2563-stm32cubeide-installation-guide-stmicroelectronics.pdf)
위 링크에서 데비안 패키지 설치 파일을 다운로드 후 압축 해제.
압축을 해제하면 shell 파일(.sh)이 나오는데, 이것을 설치한다.
파일 이름이 상당히 기니 stm.sh 등 간단한 이름으로 바꾸고 시작하는 것을 추천한다.
```bash title="설치 명령어"
sudo chmod 777 stm.sh
sudo ./stm.sh
```

![[Images/Pasted image 20250904231202.png]]

해당 명령어로 설치를 진행하면 맨 처음에 약관이 나오는데, 키보드의 페이지 다운 버튼을 여러번 눌러 내려간 후 Y를 입력해 모두 동의한다. 
그 이후에도 추가 프로그램(디버그 관련) 설치 및 동의 등 여부를 물어보는데, 마찬가지로 모두 y로 설치하면 된다.

![[Images/Pasted image 20250905132048.png]]
프로그램을 실행 후 상단 Help 탭에서 STM32Cube updates -> Connection to myST에 들어간다.
들어가면 나오는 팝업 창에서 가입한 계정으로 로그인을 해 준다.


![[Images/Pasted image 20250905132343.png]]
그 이후 상단 File 탭에서 New->STM32 Project를 들어가서 새로운 프로젝트를 만들어 준다.


![[Images/Pasted image 20250905132451.png]]
좌측 상단에 내 보드에 있는 칩을 검색 후 리스트에서 선택해 다음으로 넘어간다.
앞으로 자주 쓸 보드이니 별표를 체크해 두는것도 좋다.


![[Images/Pasted image 20250905132606.png]]
그 다음 프로젝트 이름을 입력하고 Next를 클릭한다.


![[Images/Pasted image 20250905132802.png]]
별 다른 설정 없이 Finish를 누른다.

![[Images/Pasted image 20250905132829.png]]
그러면 현재 내 프로젝트에 필요한 패키지를 자동으로 받기 시작한다.
위의 과정 중 MyST에 로그인을 하지 않으면 다운로드를 하지 못하니 주의!
설치가 끝나면 프로그램 사용이 가능하다.


# 4. vsCode 설치 및 AVR 개발환경 만들기

[공홈 설치링크](https://code.visualstudio.com/)

우분투의 App Center에서도 다운로드 받을 수 있지만, SNAP 패키지로 받았을 때 한글 관련 버그가 있다는 제보가 많으니 공홈에서 Debian 패키지로 다운로드 받도록 한다.(본인도 갑자기 걸린 버그임)

## 1. vsCode 설치

```bash title="설치 명령어"
sudo apt install ./code어쩌구저쩌구.deb
```

## 2. AVR 관련 선행 프로그램 설치

[Microchip 공홈](https://www.microchip.com/en-us/tools-resources/develop/microchip-studio/gcc-compilers)

![[Images/Pasted image 20250904233554.png]]
Microchip 홈페이지에서 AVR Toolchain을 설치한다.
리눅스 OS에 ATmega128a(8비트)를 사용할 예정이니 8비트 툴체인을 받아 준다.
설치 후 압축 해제한 폴더는 이후에 vsCode에서 사용해야 하니 찾을 수 있는 경로에 넣어준다.

```bash title="설치 명령어"
sudo apt install cmake
```
위의 명령어로 cmake를 설치해 준다.

## 3. vsCode 설정


### 1. 확장기능 설치

![[Images/Pasted image 20250904234733.png]]
vsCode 좌측 탭에서 Extension 탭을 찾아 사진에 나온 확장기능 중 Github 관련 제외 모두 설치한다.
 
### 2. AVR 컴파일, 디버깅 환경 구축

#### 1. Cmake Tools 설정

![[Images/Pasted image 20250904234031.png]]
vsCode 좌상단 File 탭을 클릭해 워크스페이스를 만들거나 이미 있는 폴더를 설정해 준다.


![[Images/Pasted image 20250904235341.png]]
그 후 Extension에서 Cmake Tools에 우클릭 후 설정에 들어간다.

![[Images/Pasted image 20250904235444.png]]
설정 중 Configure Args에 Add item을 클릭한다.

![[Images/Pasted image 20250904235620.png]]
그 후 [[#2. AVR 관련 선행 프로그램 설치|위에서 설치했던]] AVR Toolchain의 경로를 입력해 준다.

```
-DAVR_TOOLCHAIN_DIR=/TOOLCHAIN경로
```


Toolchain의 경로를 입력했으면 Cmake의 경로 또한 추가해 준다.
```bash title="경로 찾기 명령어"
sudo which make
```
위의 명령어로 cmake가 설치된 경로를 찾은 후


![[Images/Pasted image 20250905001109.png]]
```
-DCMAKE_MAKE_PROGRAM=/cmake경로
```
위와 같이 총 2개의 경로를 추가해 준다.


![[Images/Pasted image 20250905001303.png]]
그 후 밑에서 Generator 설정 칸에 "Unix Makefiles"를 입력한다.



#### 2. Cmake 설정파일 만들기

![[Images/Pasted image 20250905001524.png]]
워크스페이스 내부에 tools 폴더를 만들고 그 폴더에 avr-gcc.cmake라는 파일을 생성한다.

```cmake title="avr-gcc.cmake"
# CMake 프로젝트에 AVR 플랫폼 설정
set(CMAKE_SYSTEM_NAME Generic) # 시스템 이름을 'Generic'(범용)으로 설정
set(CMAKE_SYSTEM_PROCESSOR AVR) # 프로세서를 AVR 마이크로컨트롤러로 설정

  

# 타겟 MCU 설정 (2025.04.30 수정 사항)
set(MCU atmega128a) # 사용할 마이크로컨트롤러를 ATmega128A로 설정
set(CMAKE_C_FLAGS "-mmcu=${MCU}") # MCU 설정
set(CMAKE_CXX_FLAGS "-mmcu=${MCU}") # C++ 컴파일러에 MCU 설정 플래그 전달

  

# AVR Toolchain 경로 설정
set(BINUTILS_PATH ${AVR_TOOLCHAIN_DIR}) # AVR 도구체인 루트 디렉토리 지정

  

# AVR Toolchain 실행 파일 경로 설정
set(TOOLCHAIN_PREFIX ${AVR_TOOLCHAIN_DIR}/bin/avr-) # AVR 컴파일러 및 유틸리티 파일 경로 접두사 설정

  

# CMake 테스트 빌드 대상 유형 설정
set(CMAKE_TRY_COMPILE_TARGET_TYPE STATIC_LIBRARY) # CMake의 테스트 컴파일을 정적 라이브러리로 제한

  

# 컴파일러 경로 설정
set(CMAKE_C_COMPILER "${TOOLCHAIN_PREFIX}gcc" CACHE FILEPATH "C Compiler path") # C 컴파일러 경로
set(CMAKE_ASM_COMPILER ${CMAKE_C_COMPILER}) # ASM(어셈블리) 컴파일러를 C 컴파일러와 동일하게 설정
set(CMAKE_CXX_COMPILER "${TOOLCHAIN_PREFIX}g++" CACHE FILEPATH "C++ Compiler path") # C++ 컴파일러 경로

  

# AVR에서 사용하는 추가 유틸리티 경로 설정
set(CMAKE_OBJCOPY ${TOOLCHAIN_PREFIX}objcopy CACHE INTERNAL "objcopy tool") # 바이너리 변환 유틸리티 설정
set(CMAKE_SIZE_UTIL ${TOOLCHAIN_PREFIX}size CACHE INTERNAL "size tool") # 바이너리 크기 확인 유틸리티 설정

  

# C/C++ 표준 버전 설정
set(CMAKE_C_STANDARD 11) # C 언어 표준을 C11로 설정
set(CMAKE_CXX_STANDARD 11) # C++ 언어 표준을 C++11로 설정

  

# 컴파일러 확인 단계 비활성화
set(CMAKE_C_COMPILER_FORCED TRUE) # C 컴파일러 강제 사용 (검사 생략)
set(CMAKE_CXX_COMPILER_FORCED TRUE) # C++ 컴파일러 강제 사용 (검사 생략)

  

# 컴파일 및 링크 시 사용할 검색 경로 설정
set(CMAKE_FIND_ROOT_PATH ${BINUTILS_PATH}) # 검색 루트 경로를 도구체인 경로로 설정
set(CMAKE_FIND_ROOT_PATH_MODE_PROGRAM NEVER) # 프로그램 검색 시 루트 경로 사용 안 함
set(CMAKE_FIND_ROOT_PATH_MODE_LIBRARY ONLY) # 라이브러리 검색 시 루트 경로만 사용
set(CMAKE_FIND_ROOT_PATH_MODE_INCLUDE ONLY) # 헤더 파일 검색 시 루트 경로만 사용
set(CMAKE_FIND_ROOT_PATH_MODE_PACKAGE ONLY) # 패키지 검색 시 루트 경로만 사용
```
위의 코드를 복사 후 방금 만든 cmake 파일에 붙여넣기 한다.


![[Images/Pasted image 20250905001857.png]]
워크스페이스 내부에 .vscode 폴더를 만든 후 내부에 cmake-kits.jason 파일을 생성한다.

```json title:"cmake-kits.jason"
[
	{
		"name": "AVR-GCC Embedded",
		"toolchainFile": "${workspaceFolder}/tools/avr-gcc.cmake"
	}
]
```
위의 코드를 복사해서 방금 만든 파일에 붙여넣는다.


![[Images/Pasted image 20250905002742.png]]
vsCode에서 f1키를 눌러 커맨드 창을 띄우고, "CMake: Configure" 커맨드를 찾아 실행한다.





# 5. WINE 및 카카오톡 설치

카카오톡은 정식으로 리눅스를 지원하지 않는다. 때문에 우분투에서 카톡을 사용하려면 에뮬레이터 프로그램 등을 사용해야 하는데, 가장 대중적인 프로그램이 WINE이다.
## 1. WINE 설치

사용 중인 OS의 아키텍쳐가 64비트 기반이면 32비트 아키텍쳐를 활성화해 준다.
```bash title="설치 명령어"
sudo dpkg --add-architecture i386
sudo mkdir -pm755 /etc/apt/keyrings
```
keyrings 폴더가 이미 해당 디렉토리에 있을 경우 2번 줄 명령어는 생략 가능.


```bash title="키 로드"
wget -O - https://dl.winehq.org/wine-builds/winehq.key | sudo gpg --dearmor -o /etc/apt/keyrings/winehq-archive.key -
```
위의 명령어로 방금 만든 폴더에 키값을 가져온다.

![[Images/Pasted image 20250905003946.png]]
이런 응답이 나오면 성공한 것.



| **plucky**  <br>Ubuntu 25.04                     | ```sudo wget -NP /etc/apt/sources.list.d/ https://dl.winehq.org/wine-builds/ubuntu/dists/plucky/winehq-plucky.sources```     |
| ------------------------------------------------ | ---------------------------------------------------------------------------------------------------------------------------- |
| **noble**  <br>Ubuntu 24.04  <br>Linux Mint 22   | ```sudo wget -NP /etc/apt/sources.list.d/ https://dl.winehq.org/wine-builds/ubuntu/dists/noble/winehq-noble.sources```       |
| **jammy**  <br>Ubuntu 22.04  <br>Linux Mint 21.x | ```sudo wget -NP /etc/apt/sources.list.d/ https://dl.winehq.org/wine-builds/ubuntu/dists/focal/winehq-focal.sources```       |
| **forky**  <br>Debian Testing                    | ```sudo wget -NP /etc/apt/sources.list.d/ https://dl.winehq.org/wine-builds/debian/dists/forky/winehq-forky.sources```       |
| **trixie**  <br>Debian 13                        | ```sudo wget -NP /etc/apt/sources.list.d/ https://dl.winehq.org/wine-builds/debian/dists/trixie/winehq-trixie.sources```     |
| **bookworm**  <br>Debian 12                      | ```sudo wget -NP /etc/apt/sources.list.d/ https://dl.winehq.org/wine-builds/debian/dists/bookworm/winehq-bookworm.sources``` |
위의 표에서 본인이 해당되는 OS에 맞는 명령어를 사용해 리포를 지정해 준다.
그 후 ``sudo apt update`` 명령어를 이용해 방금 추가한 리포에서 파일을 받아준다. 


```bash title="설치 명령어"
sudo apt install --install-recommends winehq-stable
wine --version
```
리포에서 파일을 받았으면 위의 명령어를 통해 와인을 설치한다.
설치가 끝났으면 ``wine --version`` 혹은 ``which wine`` 등의 명령어로 제대로 설치가 됐는지 확인할수 있다. 

[WINE 모노 설치 링크](https://gitlab.winehq.org/mono/wine-mono/-/releases)
원래는 .netframework 기반으로 작동하는 프로그램을 돌리려면 WINE mono를 추가로 설치해 줘야 하지만, 처음 WINE 구동시 mono가 없으니 설치하겠냐고 물어보니 그때 설치하면 된다.

## 2.  카카오톡 설치

[카톡 공홈 설치 링크](https://www.kakaocorp.com/page/service/service/KakaoTalk)

와인을 설치했으면 공홈 링크에서 설치 파일을 받고 실행한다.
설치 후 카카오톡을 실행해 보면 원래는 한글 폰트가 없어서 ㅁㅁㅁ 이렇게 떠야 하지만, 어째서인지 앱 내부는 괜찮다...?

![[Images/Pasted image 20250905010503.png]]
하지만 앱 내부는 괜찮아도 백그라운드는 여전히 ㅁㅁㅁ로 폰트가 깨져 보인다.
이를 해결하기 위해 wine 경로 내에 한글 폰트를 추가해 줘야 한다.

경로는 보통 아래와 같다.
/home/(사용자명)/.wine/drive_c/windows/Fonts

[굴림체 다운로드 링크](https://macsplex.com/Wdisplay/9776)
위에서 .ttc 확장자의 굴림체를 다운로드한 후 Fonts 폴더에 넣는다.

![[Images/Pasted image 20250905011733.png]]
그 후 ~/.wine 폴더 내에 system.reg 레지스트리 파일을 메모장으로 열어서 MS Shell Dlg를 검색한다.
나온 두가지 모두 Gulim으로 변경해준다.

![[Images/Pasted image 20250905011845.png]]
그 이후 카카오톡을 재시작하면 변경된 것을 확인할 수 있다.


# 6. 듀얼부팅 관련 설정들

## 1. 블루투스 키보드 항상 페어링 해야 하는 문제 해결법

[[Troubleshoot/듀얼부팅 블루투스 키보드 페어링 해결|듀얼부팅 블루투스 키보드 페어링 해결]]

위 문서 참조.

## 2. 듀얼 부팅 시 윈도우에서 시간 안맞는 문제 해결법

[[Troubleshoot/듀얼부팅 윈도우 시간 변경 해결|듀얼부팅 윈도우 시간 변경 해결]]

위 문서 참조.

# 7. 우분투 관련 설정들

## 1. PC 시작 시 백그라운드에 특정 프로그램 자동으로 시작하기

윈도우의 시작 프로그램과 비슷하게 우분투에서도 시작 서비스가 있다.
어떤 프로그램들은 설정에 시작 서비스를 지원하지만, 실제로 적용되지 않는 것들이 많다.

![[Images/Pasted image 20250908173313.png]]
디스코드를 예로 들면, GUI 내부 설정창에도 관련 설정이 있지만, 체크가 되어 있어도 실제로 적용되진 않는다.


![[Images/Pasted image 20250908173630.png]]
이를 해결하기 위해 우분투의 Startup Applications 앱을 실행한다.

![[Images/Pasted image 20250908173722.png]]
실행하면 이런 식으로 시작 프로그램으로 설정이 된 프로필들이 목록으로 나온다.
이 창에서 우측 추가 탭을 누른 후

![[Images/Pasted image 20250908173818.png]]
사진과 같이 Name 란에는 목록에 보일 이름을 쓰고, Comment란에는 목록에 보일 설명을 작성한다.
Command란이 실제 실행할 프로그램 명령어를 적는 칸이다.

### 1. 시작하자마자 특정 프로그램을 띄우고 싶은 경우

이 경우는 간단히 해당 프로그램 시작 명령어를 작성하면 된다.
(보통 which discord, discord --version 등과 같이 터미널에서 사용하는 명령어)

예를 들어, 컴퓨터를 켜자 마자 디스코드를 바로 띄우고 싶은 경우는
Command 라인에 'discord' 라고만 적어주면 된다.

### 2. 새 창을 띄우지 않고 백그라운드로 돌아가게 하고 싶은 경우

이 경우는
1. 프로그램 자체가 백그라운드 기능이 있어야 함.
2. 백그라운드로 시작하는 명령어를 직접 찾아야 함.

두 가지의 조건이 필요하다.

![[Images/Pasted image 20250908174532.png]]
첫째로 상단 트레이에 