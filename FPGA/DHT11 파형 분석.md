![[Obsidian/Images/Pasted image 20250819102033.png]]


![[Obsidian/Images/KakaoTalk_20250819_101827581.jpg]]
DHT11의 데이터 시그널 전체 파형 모습.

### 1. 스타트 시그널 파형 분석

![[Obsidian/Images/Pasted image 20250819102106.png]]
데이터시트에 따르면 
1. 첫 시작시 MCU(현재 Basys3)에서 High 신호를 20~40us정도 보냄
2. 센서 모듈에서 Low를 80us정도 보냄
3. 센서 모듈에서 High를  80us정도 보냄
4. 시작 신호 끝, 이후부터 데이터 신호

위와 같은 프로토콜을 갖고 있다. 이에 따라 파형을 검증해 보면
![[Obsidian/Images/KakaoTalk_20250819_101827581_01.jpg]]
MCU에서 첫 High 신호를  -20us ~ 0s로 20us를 잘 보내고 있고

![[Obsidian/Images/KakaoTalk_20250819_101827581_02.jpg]]
그 다음 Low에서 80us를 잘 유지하고 있는 것을 볼수 있다.

![[Obsidian/Images/KakaoTalk_20250819_101827581_03.jpg]]
이후 다시 High에서 80us ~ 170us로 80us에 근접한 90us정도를 잘 유지하고 있어 데이터 신호를 보낼 준비가 되었음을 확인할 수 있다.


### 2. 데이터 시그널 파형 분석

![[Obsidian/Images/Pasted image 20250819105033.png]]
데이터시트에 따르면 스타트 시그널 직후 Low를 50us 유지해 데이터 시그널을 보낼 준비가 되었음을 알리고, 그 이후에 High 시그널의 유지 시간에 따라 0 신호인지 1 신호인지를 결정하는 프로토콜이다.

High 레벨을 26~28us정도 유지 시 0 신호이고,
![[Obsidian/Images/Pasted image 20250819105226.png]]
70us 유지 시 high 신호이다.

이에 따라 실제 파형을 분석해 보면

![[Obsidian/Images/KakaoTalk_20250819_101827581_04.jpg]]
스타트 시그널 이후 Low 레벨을 170us ~ 220us로 50us를 잘 유지하는 것을 볼 수 있으므로 이후에는 데이터 신호가 나간다.
![[Obsidian/Images/KakaoTalk_20250819_101827581_05.jpg]]
![[Obsidian/Images/KakaoTalk_20250819_101827581_06.jpg]]
데이터 신호에서 짧은 High 신호는 대략 20us~30us 정도를 유지하고, 긴 High 신호는 대략 70us를 유지하는 것을 확인할 수 있었다.

여기서 얻은 정보로 실제 데이터 비트를 구성해 보면

0010 1010 / 0000 0000 / 0001 1100 / 0000 0000 / 0110 0110
으로 순서대로 습도 정수부, 소수부, 온도 정수부, 소수부, 체크섬 데이터로 이루어져있다.
데이터시트에서 확인한 대로 소수부는 측정할 수 없는 것도 파형에서 검증할 수 있다.

이 바이너리를 10진수로 변환해 보면 습도 42%, 온도 섭씨 28도로 유효한 값을 나타내는 것을 확인할 수 있다.
또한, 비트 무결성 검사인 checksum 비트도 0010 1010 + 0001 1100 = 0110 0110 으로 통신 오류가 없이 깨끗한 데이터를 받았음을 확인할 수 있다.