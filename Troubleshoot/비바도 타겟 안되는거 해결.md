
문제점: open target이 됐다 안됐다 랜덤임, 돼도 상당히 오래 걸림.


## 가짜 해결법
Vivado 상단 Help -> Add design tools or devices 버튼 눌러서 케이블 드라이버(USB 드라이버) 다운받으려고 하면 아래와 같이 뜸.

![[../Images/Pasted image 20250715100802.png]]

[UG973 문서](https://docs.amd.com/r/en-US/ug973-vivado-release-notes-install-license/Installing-Cable-Drivers)

![[../Images/Pasted image 20250715102521.png]]
드라이버를 받기 전 선행 라이브러리를 받아야 함
현재 우리는 24.01 버전 사용하므로 맨 마지막 줄에 있는 디렉토리를 찾아봐야 함.
vitis가 설치된 폴더 내 scripts 폴더로 가보면 installLibs.sh 파일이 있음.
``sudo install ./installLibs.sh`` 로 라이브러리 설치.
뭔가 굉장히 많은걸 받기 시작함.

![[../Images/Pasted image 20250715102748.png]]
그 다음에 케이블 드라이버 설치
비바도 폴더 내 data/xicom/cable_drivers/in64 디렉토리로 가보면 텍스트 편집해서 디렉토리를 바꿔준 후 설치했던 install_digilent.sh 파일 외에 install_drivers 라는 파일도 있음.
해당 파일도 ``sudo install ./install_drivers`` 로 다운로드 받아줌.
본인은 파일 한두개? 업데이트가 진행됐음.

여기까지는 해결 안됨

-------------------------------------
**실제로 해결된거**

![[../Images/Pasted image 20250715104208.png]]
install_digilent.sh 파일을 텍스트 에디터로 열어본 화면.
이걸 실행하면 root/etc/udev/rules.d 디렉토리에 52-xilinx-digilent-usb.rules 라는 파일이 설치됨.
이제 이 디렉토리로 가서 ``sudo rm -f 52-xilinx-digilent-usb.rules`` 로 파일을 삭제해줌.
이후 위의 텍스트 에디터에서 else 밑에 chmod가 644(r/w, r, r) 권한으로 되어 있는데 이걸 666(r/w, r/w, r/w) 으로 바꿔줌.
어차피 usb 드라이버 관련 파일이라 읽기만 할텐데 왜 666으로 만들어 주는지는 몰????ㄹ루????

여튼 이렇게 바꿔준 후 다시 install_digilent.sh 를 실행해서 드라이버를 재설치 해주면 바로 해결됨.




------------------------------
저거도 사실 해결된게 아니였음 ㅋㅋ
## 진짜 해결법

**문제의 원인**: 
Open Target으로 하드웨어(Basys3)와 연결 시 hw_server라는 서비스가 시작되고, 이 서비스가 특정 TCP 포트(3121)를 잡아서 연결해 주는 방식.
그런데 모종의 이유로 Open Target 시 hw_server의 위치를 잡는데 오래 걸림. 터미널에서 해당 서비스를 미리 켜 둔 후 open target을 하면 바로 연결이 되는 것을 확인할 수 있음.

해결법: 
1. 홈 경로에 있는 .bashrc 파일을 찾아서 텍스트 에디터로 연 후, 맨 밑줄에 
   export PATH=/home/wonhyeok/Xilinx/Vivado/2024.2/bin:$PATH
   (PATH 이후의 경로는 본인의 비바도가 설치되어 있는 걸로 변경) 를 추가함.
2.  ``source ~/.bashrc`` 명령어를 통해 위에서 추가한 hw_server가 설치된 경로를 패스에 추가해줌.
3. 위의 경로에 가서 ``chmod +x hw_server`` 명령어로 실행 권한을 추가해줌.
4. 터미널에서 어떠한 경로에서도 ``hw_server``로 실행이 되는지 확인.
5. ``sudo nano /etc/systemd/system/hw_server.service`` 명령어로 서비스를 생성하고
6. 
```shell
[Unit]
Description=Xilinx hw_server daemon
After=network.target

[Service]
Type=simple
ExecStart=/home/wonhyeok/Xilinx/Vivado/2024.2/bin/hw_server
Restart=on-failure
User=wonhyeok
StandardOutput=syslog
StandardError=syslog
SyslogIdentifier=hw_server

[Install]
WantedBy=multi-user.target
```
위의 내용을 추가해줌. ExecStart 우측의 경로와 User 우측의 사용자 이름은 본인에게 맞게 수정할 것.

7. ``sudo systemctl daemon-reload`` 명령어와 ``sudo systemctl enable hw_server.service`` 명령어로 컴퓨터가 켜질때 자동으로 hw_server 서비스를 시작하도록 설정함.
8. PC를 재부팅 후 ``sudo systemctl status hw_server.service`` 와 ``ps aux | grep hw_server`` 명령어로 서비스가 자동으로 실행되었는지 확인.

이렇게 자동으로 PC 시작 시 hw_server를 실행하게 해 두면 open target시 빠르게 연결됨.
대신에 PC를 키면 항상 hw_server가 돌아가고 있다는 단점이 있음. 나중에 꼬일수도?